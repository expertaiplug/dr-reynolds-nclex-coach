<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr. Reynolds NCLEX Mastery Coach</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Stripe.js will be loaded via Netlify snippet injection -->
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #64748b;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --surface: #ffffff;
            --surface-2: #f8fafc;
            --surface-3: #f1f5f9;
            --border: #e2e8f0;
            --text: #0f172a;
            --text-muted: #64748b;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-surface: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--gradient-surface);
            min-height: 100vh;
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            background: var(--surface);
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        /* Animated Background */
        .background-animation {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 200px;
            background: var(--gradient-primary);
            clip-path: polygon(0 0, 100% 0, 100% 70%, 0 100%);
            z-index: 0;
        }

        .background-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="white" opacity="0.1"/><circle cx="80" cy="40" r="0.5" fill="white" opacity="0.1"/><circle cx="40" cy="80" r="1.5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(1deg); }
        }

        /* Header */
        .header {
            position: relative;
            z-index: 10;
            padding: 2rem;
            color: white;
            text-align: center;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }

        .dr-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .header-text h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .header-text p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            position: relative;
            z-index: 5;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--border);
        }

        .nav-tab {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-muted);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .nav-tab:hover {
            color: var(--primary);
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Question Card */
        .question-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .question-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .question-number {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
        }

        .question-category {
            background: var(--surface-2);
            color: var(--text-muted);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            color: var(--text);
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .answer-option {
            padding: 1rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--surface);
        }

        .answer-option:hover {
            border-color: var(--primary);
            background: var(--surface-2);
        }

        .answer-option.selected {
            border-color: var(--primary);
            background: rgba(37, 99, 235, 0.1);
        }

        .answer-option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .answer-option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.1);
        }

        .question-actions {
            display: flex;
            gap: 1rem;
            justify-content: space-between;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--surface-2);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--surface-3);
        }

        /* Progress Section */
        .progress-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .progress-card {
            background: var(--surface);
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            text-align: center;
        }

        .progress-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .progress-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .progress-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Study Plan */
        .study-plan {
            display: grid;
            gap: 1rem;
        }

        .study-item {
            background: var(--surface);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .study-item-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .study-item-content {
            flex: 1;
        }

        .study-item-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .study-item-description {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* Explanation */
        .explanation {
            background: var(--surface-2);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
            border-left: 4px solid var(--primary);
        }

        .explanation h4 {
            color: var(--primary);
            margin-bottom: 1rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 1rem;
            }

            .dr-avatar {
                width: 60px;
                height: 60px;
                font-size: 1.2rem;
            }

            .header-text h1 {
                font-size: 1.5rem;
            }

            .main-content {
                padding: 1rem;
            }

            .nav-tabs {
                flex-wrap: wrap;
            }

            .question-actions {
                flex-direction: column;
            }

            .progress-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="background-animation"></div>
        
        <header class="header">
            <div class="header-content">
                <div class="dr-avatar">DR</div>
                <div class="header-text">
                    <h1>Dr. Reynolds NCLEX Coach</h1>
                    <p>Your personalized path to NCLEX success</p>
                </div>
            </div>
        </header>

        <main class="main-content">
            <nav class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('practice')">Practice Questions</button>
                <button class="nav-tab" onclick="showTab('progress')">Progress</button>
                <button class="nav-tab" onclick="showTab('study-plan')">Study Plan</button>
                <button class="nav-tab" onclick="showTab('upgrade')" style="background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white; border-radius: 8px; margin-left: auto;">✨ Upgrade</button>
            </nav>

            <!-- Practice Questions Tab -->
            <div id="practice" class="tab-content active">
                <div class="question-card">
                    <div class="question-header">
                        <div class="question-number" id="questionNumber">Question 1 of 3</div>
                        <div class="question-category" id="questionCategory">Pharmacology</div>
                    </div>
                    
                    <div class="question-text" id="questionText">
                        A nurse is preparing to administer digoxin 0.25 mg PO to a client. Before administering the medication, which assessment is most important for the nurse to perform?
                    </div>
                    
                    <div class="answer-options" id="answerOptions">
                        <div class="answer-option" onclick="selectAnswer(this, 0)">
                            A) Check the client's blood pressure
                        </div>
                        <div class="answer-option" onclick="selectAnswer(this, 1)">
                            B) Assess the client's respiratory rate
                        </div>
                        <div class="answer-option" onclick="selectAnswer(this, 2)">
                            C) Monitor the client's apical pulse for 1 minute
                        </div>
                        <div class="answer-option" onclick="selectAnswer(this, 3)">
                            D) Evaluate the client's level of consciousness
                        </div>
                    </div>
                    
                    <div class="question-actions">
                        <button class="btn btn-secondary" onclick="previousQuestion()">Previous</button>
                        <button class="btn btn-primary" onclick="submitAnswer()" id="submitBtn" disabled>Submit Answer</button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn" style="display: none;">Next Question</button>
                    </div>
                    
                    <div id="explanation" class="explanation" style="display: none;">
                        <h4>💡 Explanation</h4>
                        <p>Before administering digoxin, the nurse must assess the apical pulse for 1 full minute. Digoxin is a cardiac glycoside that can cause bradycardia and other cardiac arrhythmias. If the pulse rate is below 60 bpm in adults, the medication should be withheld and the healthcare provider notified.</p>
                    </div>
                </div>
            </div>

            <!-- Progress Tab -->
            <div id="progress" class="tab-content">
                <div class="progress-section">
                    <div class="progress-card">
                        <div class="progress-icon" style="background: rgba(245, 158, 11, 0.1); color: var(--warning);">📊</div>
                        <div class="progress-value" style="color: var(--warning);" id="overallScore">0%</div>
                        <div class="progress-label">Overall Score</div>
                    </div>
                    
                    <div class="progress-card">
                        <div class="progress-icon" style="background: rgba(37, 99, 235, 0.1); color: var(--primary);">🎯</div>
                        <div class="progress-value" style="color: var(--primary);" id="questionsCompleted">0</div>
                        <div class="progress-label">Questions Completed</div>
                    </div>
                    
                    <div class="progress-card">
                        <div class="progress-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);">⚡</div>
                        <div class="progress-value" style="color: var(--success);" id="currentStreak">0</div>
                        <div class="progress-label">Current Streak</div>
                    </div>
                    
                    <div class="progress-card">
                        <div class="progress-icon" style="background: rgba(139, 92, 246, 0.1); color: #8b5cf6;">🏆</div>
                        <div class="progress-value" style="color: #8b5cf6;" id="passProbability">--</div>
                        <div class="progress-label">Pass Probability</div>
                    </div>
                </div>

                <div class="question-card">
                    <h3 style="margin-bottom: 1.5rem;">📈 Performance by Category</h3>
                    <div style="display: grid; gap: 1rem;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="pharmacology-progress">
                            <span>Pharmacology</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--warning);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="medical-surgical-progress">
                            <span>Medical-Surgical</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--success);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="pediatrics-progress">
                            <span>Pediatrics</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--danger);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="mental-health-progress">
                            <span>Mental Health</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--danger);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="maternity-progress">
                            <span>Maternity</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--success);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: var(--surface-2); border-radius: 8px;" id="community-health-progress">
                            <span>Community Health</span>
                            <div style="display: flex; align-items: center; gap: 1rem;">
                                <div style="width: 100px; height: 8px; background: var(--border); border-radius: 4px; overflow: hidden;">
                                    <div style="width: 0%; height: 100%; background: var(--warning);" class="progress-bar"></div>
                                </div>
                                <span style="font-weight: 600; color: var(--text-muted);" class="category-score">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Study Plan Tab -->
            <div id="study-plan" class="tab-content">
                <div class="question-card">
                    <h3 style="margin-bottom: 1.5rem;">📅 Personalized Study Plan</h3>
                    <div class="study-plan" id="studyPlanContainer">
                        <!-- Dynamic study plan will be inserted here -->
                    </div>
                </div>

                <div class="question-card">
                    <h3 style="margin-bottom: 1.5rem;">🎯 Focus Areas Based on Your Performance</h3>
                    <div style="display: grid; gap: 1rem;" id="focusAreasContainer">
                        <!-- Dynamic focus areas will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Upgrade Tab -->
            <div id="upgrade" class="tab-content">
                <div class="question-card" style="text-align: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">✨</div>
                    <h2 style="margin-bottom: 1rem; color: white;">Unlock Your Full NCLEX Potential</h2>
                    <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 2rem;">Join thousands of nursing students who've passed with Dr. Reynolds Premium</p>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    <!-- Free Plan -->
                    <div class="question-card" style="position: relative;">
                        <div style="text-align: center; margin-bottom: 1.5rem;">
                            <h3 style="color: var(--text-muted);">Free Plan</h3>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--text-muted); margin: 1rem 0;">$0</div>
                            <div style="color: var(--text-muted);">Current Plan</div>
                        </div>
                        <div style="display: grid; gap: 0.75rem; margin-bottom: 2rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>10 practice questions</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Basic progress tracking</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>6 NCLEX categories</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--danger);">✗</span>
                                <span style="color: var(--text-muted);">Unlimited questions</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--danger);">✗</span>
                                <span style="color: var(--text-muted);">Detailed explanations</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--danger);">✗</span>
                                <span style="color: var(--text-muted);">Performance analytics</span>
                            </div>
                        </div>
                    </div>

                    <!-- Premium Plan -->
                    <div class="question-card" style="position: relative; border: 3px solid var(--accent); box-shadow: 0 8px 32px rgba(245, 158, 11, 0.2);">
                        <div style="position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: var(--accent); color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">MOST POPULAR</div>
                        <div style="text-align: center; margin-bottom: 1.5rem;">
                            <h3 style="color: var(--accent);">Premium Plan</h3>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--accent); margin: 1rem 0;">$29.99<span style="font-size: 1rem; font-weight: 400;">/month</span></div>
                            <div style="color: var(--text-muted);">Everything you need to pass</div>
                        </div>
                        <div style="display: grid; gap: 0.75rem; margin-bottom: 2rem;">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span><strong>Unlimited practice questions</strong></span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span><strong>2,500+ NCLEX-style questions</strong></span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Detailed explanations & rationales</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Advanced performance analytics</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Personalized study plans</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Timed practice exams</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="color: var(--success);">✓</span>
                                <span>Priority email support</span>
                            </div>
                        </div>
                        <button data-upgrade="premium" class="btn" style="width: 100%; background: var(--accent); color: white; font-size: 1.1rem; padding: 1rem;">
                            Start 7-Day Free Trial
                        </button>
                    </div>
                </div>

                <div class="question-card">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">🎯 Why Students Choose Premium</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; margin-bottom: 1rem;">📈</div>
                            <h4 style="margin-bottom: 0.5rem;">94% Pass Rate</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Premium users have a 94% first-time pass rate vs 87% national average</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; margin-bottom: 1rem;">⚡</div>
                            <h4 style="margin-bottom: 0.5rem;">Save 40+ Hours</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">AI-powered study plans focus on your weak areas, not wasted time</p>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2.5rem; margin-bottom: 1rem;">🏆</div>
                            <h4 style="margin-bottom: 0.5rem;">Confidence Boost</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Walk into your NCLEX knowing you're fully prepared</p>
                        </div>
                    </div>
                </div>

                <div class="question-card" style="background: var(--surface-2);">
                    <h3 style="margin-bottom: 1.5rem; text-align: center;">💬 What Students Say</h3>
                    <div style="display: grid; gap: 1.5rem;">
                        <div style="background: var(--surface); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--success);">
                            <p style="font-style: italic; margin-bottom: 1rem;">"I passed on my first try! The unlimited questions and detailed explanations made all the difference. Worth every penny!"</p>
                            <div style="font-weight: 600; color: var(--success);">- Sarah M., RN</div>
                        </div>
                        <div style="background: var(--surface); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--primary);">
                            <p style="font-style: italic; margin-bottom: 1rem;">"The personalized study plan helped me focus on my weak areas. I went from 65% to 85% in just 3 weeks!"</p>
                            <div style="font-weight: 600; color: var(--primary);">- Michael R., RN</div>
                        </div>
                        <div style="background: var(--surface); padding: 1.5rem; border-radius: 12px; border-left: 4px solid var(--accent);">
                            <p style="font-style: italic; margin-bottom: 1rem;">"Dr. Reynolds Premium gave me the confidence I needed. The practice exams felt just like the real NCLEX!"</p>
                            <div style="font-weight: 600; color: var(--accent);">- Jessica L., RN</div>
                        </div>
                    </div>
                </div>

                <div class="question-card" style="text-align: center; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none;">
                    <h3 style="margin-bottom: 1rem; color: white;">🔒 Risk-Free Guarantee</h3>
                    <p style="font-size: 1.1rem; margin-bottom: 1.5rem; opacity: 0.9;">Try Premium free for 7 days. If you don't see improvement, get a full refund within 30 days.</p>
                    <button data-upgrade="premium" class="btn" style="background: white; color: var(--success); font-size: 1.2rem; padding: 1rem 2rem; font-weight: 700;">
                        Start Your Free Trial Now
                    </button>
                    <p style="font-size: 0.9rem; margin-top: 1rem; opacity: 0.8;">No credit card required • Cancel anytime</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        let selectedAnswer = null;
        let currentQuestion = 1;
        let totalQuestions = 10;
        
        // Progress tracking
        let userProgress = {
            totalAnswered: 0,
            correctAnswers: 0,
            categoryStats: {
                'Pharmacology': { correct: 0, total: 0 },
                'Medical-Surgical': { correct: 0, total: 0 },
                'Pediatrics': { correct: 0, total: 0 },
                'Mental Health': { correct: 0, total: 0 },
                'Maternity': { correct: 0, total: 0 },
                'Community Health': { correct: 0, total: 0 }
            },
            streak: 0,
            lastCorrect: false
        };
        
        // User subscription status
        let userSubscription = {
            isPremium: false,
            trialDaysLeft: 0,
            questionsRemaining: 10 // Free users get 10 questions
        };
        
        // Stripe will be configured via Netlify snippet injection
        // This keeps your keys secure and separate from your code
        
        // Sample questions with categories
        const questions = [
            {
                category: 'Pharmacology',
                question: "A nurse is preparing to administer digoxin 0.25 mg PO to a client. Before administering the medication, which assessment is most important for the nurse to perform?",
                options: [
                    "A) Check the client's blood pressure",
                    "B) Assess the client's respiratory rate", 
                    "C) Monitor the client's apical pulse for 1 minute",
                    "D) Evaluate the client's level of consciousness"
                ],
                correct: 2,
                explanation: "Before administering digoxin, the nurse must assess the apical pulse for 1 full minute. Digoxin is a cardiac glycoside that can cause bradycardia and other cardiac arrhythmias. If the pulse rate is below 60 bpm in adults, the medication should be withheld and the healthcare provider notified."
            },
            {
                category: 'Mental Health',
                question: "A client with depression tells the nurse, 'I feel like ending it all.' What is the nurse's priority response?",
                options: [
                    "A) 'You shouldn't feel that way, things will get better'",
                    "B) 'Tell me more about these feelings you're having'",
                    "C) 'Have you thought about how you would hurt yourself?'",
                    "D) 'Let me call your family to come visit you'"
                ],
                correct: 2,
                explanation: "When a client expresses suicidal ideation, the nurse's priority is to assess the immediacy of risk by determining if the client has a specific plan. This direct assessment helps determine the level of intervention needed."
            },
            {
                category: 'Pediatrics',
                question: "A 2-year-old child is admitted with suspected epiglottitis. Which nursing action should be avoided?",
                options: [
                    "A) Maintaining the child in an upright position",
                    "B) Examining the child's throat with a tongue depressor",
                    "C) Monitoring oxygen saturation continuously",
                    "D) Keeping the child calm and comfortable"
                ],
                correct: 1,
                explanation: "Examining the throat of a child with suspected epiglottitis can precipitate complete airway obstruction. The inflamed epiglottis can spasm and block the airway if manipulated."
            },
            {
                category: 'Medical-Surgical',
                question: "A client is recovering from abdominal surgery. Which finding would indicate the development of paralytic ileus?",
                options: [
                    "A) Hyperactive bowel sounds",
                    "B) Absence of bowel sounds with abdominal distention",
                    "C) Cramping abdominal pain",
                    "D) Frequent loose stools"
                ],
                correct: 1,
                explanation: "Paralytic ileus is characterized by absent bowel sounds and abdominal distention due to decreased intestinal motility following surgery or other conditions."
            },
            {
                category: 'Maternity',
                question: "A pregnant client at 32 weeks gestation reports decreased fetal movement. What is the nurse's priority action?",
                options: [
                    "A) Reassure the client that this is normal",
                    "B) Schedule a routine prenatal appointment",
                    "C) Perform a non-stress test immediately",
                    "D) Advise the client to drink cold fluids"
                ],
                correct: 2,
                explanation: "Decreased fetal movement can indicate fetal compromise. A non-stress test should be performed immediately to assess fetal well-being."
            },
            {
                category: 'Community Health',
                question: "A community health nurse is planning a vaccination program. Which population should receive priority for influenza vaccination?",
                options: [
                    "A) Healthy adults aged 18-49",
                    "B) Children over 12 years old",
                    "C) Adults over 65 and those with chronic conditions",
                    "D) Healthcare workers only"
                ],
                correct: 2,
                explanation: "Adults over 65 and individuals with chronic conditions are at highest risk for influenza complications and should receive priority for vaccination."
            },
            {
                category: 'Pharmacology',
                question: "A client is prescribed warfarin. Which laboratory value should the nurse monitor most closely?",
                options: [
                    "A) Platelet count",
                    "B) International Normalized Ratio (INR)",
                    "C) Hemoglobin level",
                    "D) White blood cell count"
                ],
                correct: 1,
                explanation: "INR is the most important laboratory value to monitor for clients taking warfarin to ensure therapeutic anticoagulation and prevent bleeding complications."
            },
            {
                category: 'Mental Health',
                question: "A client with bipolar disorder is experiencing a manic episode. Which intervention is most appropriate?",
                options: [
                    "A) Encourage group activities",
                    "B) Provide a stimulating environment",
                    "C) Set consistent limits and boundaries",
                    "D) Allow unlimited visitors"
                ],
                correct: 2,
                explanation: "During a manic episode, clients need consistent limits and boundaries to help control impulsive behavior and maintain safety."
            },
            {
                category: 'Pediatrics',
                question: "A 6-month-old infant is brought to the clinic for a well-child visit. Which developmental milestone should the nurse expect?",
                options: [
                    "A) Walking independently",
                    "B) Sitting without support",
                    "C) Speaking in two-word phrases",
                    "D) Toilet training readiness"
                ],
                correct: 1,
                explanation: "By 6 months, infants should be able to sit without support. Walking typically occurs around 12 months, and speech development comes later."
            },
            {
                category: 'Medical-Surgical',
                question: "A client with diabetes mellitus has a blood glucose of 45 mg/dL. Which symptom would the nurse expect to observe?",
                options: [
                    "A) Polyuria and polydipsia",
                    "B) Confusion and diaphoresis",
                    "C) Kussmaul respirations",
                    "D) Fruity breath odor"
                ],
                correct: 1,
                explanation: "A blood glucose of 45 mg/dL indicates hypoglycemia. Symptoms include confusion, diaphoresis, shakiness, and altered mental status."
            }
        ];

        // Initialize the app
        function initializeApp() {
            // Load saved subscription status
            const savedSubscription = localStorage.getItem('userSubscription');
            if (savedSubscription) {
                userSubscription = { ...userSubscription, ...JSON.parse(savedSubscription) };
            }
            
            // Load saved progress
            const savedProgress = localStorage.getItem('userProgress');
            if (savedProgress) {
                userProgress = { ...userProgress, ...JSON.parse(savedProgress) };
            }
            
            totalQuestions = questions.length;
            loadQuestion();
            updateProgressDisplay();
            updateQuestionCounter();
            updatePremiumStatus();
            
            // Check for payment status on page load
            checkPaymentStatus();
        }
        
        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem('userProgress', JSON.stringify(userProgress));
            localStorage.setItem('userSubscription', JSON.stringify(userSubscription));
        }
        
        function loadQuestion() {
            const question = questions[currentQuestion - 1];
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion} of ${totalQuestions}`;
            document.getElementById('questionCategory').textContent = question.category;
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('answerOptions');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'answer-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnswer(optionDiv, index);
                optionsContainer.appendChild(optionDiv);
            });
            
            // Update explanation
            document.getElementById('explanation').innerHTML = `
                <h4>💡 Explanation</h4>
                <p>${question.explanation}</p>
            `;
        }

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
            
            // Update progress when viewing progress tab
            if (tabName === 'progress') {
                updateProgressDisplay();
            }
            
            // Update study plan when viewing study plan tab
            if (tabName === 'study-plan') {
                updateStudyPlan();
            }
        }

        function selectAnswer(element, answerIndex) {
            // Remove previous selections
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Select current answer
            element.classList.add('selected');
            selectedAnswer = { element, answerIndex };
            
            // Enable submit button
            document.getElementById('submitBtn').disabled = false;
        }

        function submitAnswer() {
            if (!selectedAnswer) return;
            
            const currentQ = questions[currentQuestion - 1];
            const isCorrect = selectedAnswer.answerIndex === currentQ.correct;
            
            // Update progress tracking
            userProgress.totalAnswered++;
            if (isCorrect) {
                userProgress.correctAnswers++;
                userProgress.streak++;
                userProgress.lastCorrect = true;
            } else {
                userProgress.streak = 0;
                userProgress.lastCorrect = false;
            }
            
            // Update category stats
            const category = currentQ.category;
            userProgress.categoryStats[category].total++;
            if (isCorrect) {
                userProgress.categoryStats[category].correct++;
            }
            
            // Show correct/incorrect styling
            document.querySelectorAll('.answer-option').forEach((option, index) => {
                option.style.pointerEvents = 'none';
                if (index === currentQ.correct) {
                    option.classList.add('correct');
                } else if (index === selectedAnswer.answerIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            // Show explanation
            document.getElementById('explanation').style.display = 'block';
            
            // Hide submit button, show next button
            document.getElementById('submitBtn').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'inline-block';
            
            // Update progress display
            updateProgressDisplay();
            
            // Save progress
            saveProgress();
        }

        function nextQuestion() {
            // Check if user has reached their question limit
            if (!userSubscription.isPremium && userProgress.totalAnswered >= userSubscription.questionsRemaining) {
                showUpgradePrompt();
                return;
            }
            
            if (currentQuestion < totalQuestions) {
                currentQuestion++;
                resetQuestion();
                loadQuestion();
            } else {
                // Generate more questions for premium users
                if (userSubscription.isPremium) {
                    generateMoreQuestions();
                    currentQuestion++;
                    resetQuestion();
                    loadQuestion();
                } else {
                    const overallScore = Math.round((userProgress.correctAnswers / userProgress.totalAnswered) * 100);
                    alert(`🎉 Congratulations! You've completed this practice session.\n\nYour Score: ${overallScore}%\nCorrect: ${userProgress.correctAnswers}/${userProgress.totalAnswered}\nCurrent Streak: ${userProgress.streak}\n\nUpgrade to Premium for unlimited questions!`);
                }
            }
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                currentQuestion--;
                resetQuestion();
                loadQuestion();
            }
        }

        function resetQuestion() {
            // Reset answer options
            document.querySelectorAll('.answer-option').forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
                option.style.pointerEvents = 'auto';
            });
            
            // Reset buttons
            document.getElementById('submitBtn').style.display = 'inline-block';
            document.getElementById('submitBtn').disabled = true;
            document.getElementById('nextBtn').style.display = 'none';
            
            // Hide explanation
            document.getElementById('explanation').style.display = 'none';
            
            selectedAnswer = null;
        }
        
        function updateProgressDisplay() {
            // Update main progress cards
            const overallScore = userProgress.totalAnswered > 0 ? 
                Math.round((userProgress.correctAnswers / userProgress.totalAnswered) * 100) : 0;
            
            document.getElementById('overallScore').textContent = `${overallScore}%`;
            document.getElementById('questionsCompleted').textContent = userProgress.totalAnswered;
            document.getElementById('currentStreak').textContent = userProgress.streak;
            
            // Calculate pass probability (simplified formula)
            let passProbability = '--';
            if (userProgress.totalAnswered >= 3) {
                const baseScore = Math.min(overallScore + 10, 95); // Add 10% buffer, cap at 95%
                passProbability = `${baseScore}%`;
            }
            document.getElementById('passProbability').textContent = passProbability;
            
            // Update category progress bars
            Object.keys(userProgress.categoryStats).forEach(category => {
                const stats = userProgress.categoryStats[category];
                const categoryId = category.toLowerCase().replace(/[^a-z]/g, '-');
                const progressElement = document.getElementById(`${categoryId}-progress`);
                
                if (progressElement && stats.total > 0) {
                    const percentage = Math.round((stats.correct / stats.total) * 100);
                    const progressBar = progressElement.querySelector('.progress-bar');
                    const scoreSpan = progressElement.querySelector('.category-score');
                    
                    progressBar.style.width = `${percentage}%`;
                    scoreSpan.textContent = `${percentage}%`;
                    
                    // Update color based on performance
                    if (percentage >= 80) {
                        scoreSpan.style.color = 'var(--success)';
                        progressBar.style.background = 'var(--success)';
                    } else if (percentage >= 70) {
                        scoreSpan.style.color = 'var(--warning)';
                        progressBar.style.background = 'var(--warning)';
                    } else {
                        scoreSpan.style.color = 'var(--danger)';
                        progressBar.style.background = 'var(--danger)';
                    }
                }
            });
            
            // Update overall score card color
            const scoreElement = document.getElementById('overallScore');
            const scoreIcon = scoreElement.parentElement.querySelector('.progress-icon');
            if (overallScore >= 80) {
                scoreElement.style.color = 'var(--success)';
                scoreIcon.style.background = 'rgba(16, 185, 129, 0.1)';
                scoreIcon.style.color = 'var(--success)';
            } else if (overallScore >= 70) {
                scoreElement.style.color = 'var(--warning)';
                scoreIcon.style.background = 'rgba(245, 158, 11, 0.1)';
                scoreIcon.style.color = 'var(--warning)';
            } else if (overallScore > 0) {
                scoreElement.style.color = 'var(--danger)';
                scoreIcon.style.background = 'rgba(239, 68, 68, 0.1)';
                scoreIcon.style.color = 'var(--danger)';
            }
            
            // Update study plan
            updateStudyPlan();
            
            // Update question counter
            updateQuestionCounter();
        }
        
        function updateStudyPlan() {
            const studyPlanContainer = document.getElementById('studyPlanContainer');
            const focusAreasContainer = document.getElementById('focusAreasContainer');
            
            if (!studyPlanContainer || !focusAreasContainer) return;
            
            // Generate personalized study plan based on performance
            const categoryPerformances = [];
            Object.keys(userProgress.categoryStats).forEach(category => {
                const stats = userProgress.categoryStats[category];
                if (stats.total > 0) {
                    const percentage = Math.round((stats.correct / stats.total) * 100);
                    categoryPerformances.push({ category, percentage, total: stats.total });
                }
            });
            
            // Sort categories by performance (worst first)
            categoryPerformances.sort((a, b) => a.percentage - b.percentage);
            
            // Generate study plan
            let studyPlanHTML = '';
            
            if (userProgress.totalAnswered === 0) {
                studyPlanHTML = `
                    <div class="study-item">
                        <div class="study-item-icon" style="background: rgba(37, 99, 235, 0.1); color: var(--primary);">🚀</div>
                        <div class="study-item-content">
                            <div class="study-item-title">Get Started - Take Your First Practice Questions</div>
                            <div class="study-item-description">Begin with a mixed set of questions to establish your baseline performance</div>
                        </div>
                    </div>
                `;
            } else {
                // Current session summary
                const overallScore = Math.round((userProgress.correctAnswers / userProgress.totalAnswered) * 100);
                const sessionIcon = overallScore >= 80 ? '🎉' : overallScore >= 70 ? '👍' : '📚';
                const sessionStatus = overallScore >= 80 ? 'Excellent Progress!' : overallScore >= 70 ? 'Good Work!' : 'Keep Practicing!';
                
                studyPlanHTML += `
                    <div class="study-item">
                        <div class="study-item-icon" style="background: rgba(16, 185, 129, 0.1); color: var(--success);">${sessionIcon}</div>
                        <div class="study-item-content">
                            <div class="study-item-title">Current Session - ${sessionStatus}</div>
                            <div class="study-item-description">Completed ${userProgress.totalAnswered} questions with ${overallScore}% accuracy (${userProgress.streak} current streak)</div>
                        </div>
                    </div>
                `;
                
                // Next recommended focus
                if (categoryPerformances.length > 0) {
                    const weakestCategory = categoryPerformances[0];
                    const focusIcon = weakestCategory.percentage < 70 ? '🎯' : '⚡';
                    const focusColor = weakestCategory.percentage < 70 ? 'var(--danger)' : 'var(--warning)';
                    const focusBackground = weakestCategory.percentage < 70 ? 'rgba(239, 68, 68, 0.1)' : 'rgba(245, 158, 11, 0.1)';
                    
                    studyPlanHTML += `
                        <div class="study-item">
                            <div class="study-item-icon" style="background: ${focusBackground}; color: ${focusColor};">${focusIcon}</div>
                            <div class="study-item-content">
                                <div class="study-item-title">Priority Focus - ${weakestCategory.category}</div>
                                <div class="study-item-description">Current score: ${weakestCategory.percentage}% - Practice 10-15 more questions in this area</div>
                            </div>
                        </div>
                    `;
                }
                
                // Continue practicing
                studyPlanHTML += `
                    <div class="study-item">
                        <div class="study-item-icon" style="background: rgba(37, 99, 235, 0.1); color: var(--primary);">📝</div>
                        <div class="study-item-content">
                            <div class="study-item-title">Continue Practice Session</div>
                            <div class="study-item-description">Keep answering questions to improve your overall score and build confidence</div>
                        </div>
                    </div>
                `;
            }
            
            studyPlanContainer.innerHTML = studyPlanHTML;
            
            // Generate focus areas
            let focusAreasHTML = '';
            
            if (categoryPerformances.length === 0) {
                focusAreasHTML = `
                    <div style="padding: 1rem; background: rgba(37, 99, 235, 0.1); border-radius: 8px; border-left: 4px solid var(--primary);">
                        <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Start Your NCLEX Journey</h4>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Answer some practice questions to get personalized recommendations based on your performance.</p>
                    </div>
                `;
            } else {
                // Group categories by performance level
                const highPriority = categoryPerformances.filter(cat => cat.percentage < 70);
                const mediumPriority = categoryPerformances.filter(cat => cat.percentage >= 70 && cat.percentage < 80);
                const strengths = categoryPerformances.filter(cat => cat.percentage >= 80);
                
                // High priority areas
                highPriority.forEach(cat => {
                    const tips = getCategoryTips(cat.category);
                    focusAreasHTML += `
                        <div style="padding: 1rem; background: rgba(239, 68, 68, 0.1); border-radius: 8px; border-left: 4px solid var(--danger);">
                            <h4 style="color: var(--danger); margin-bottom: 0.5rem;">High Priority: ${cat.category}</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Your score is ${cat.percentage}% (${cat.total} questions). ${tips}</p>
                        </div>
                    `;
                });
                
                // Medium priority areas
                mediumPriority.forEach(cat => {
                    const tips = getCategoryTips(cat.category);
                    focusAreasHTML += `
                        <div style="padding: 1rem; background: rgba(245, 158, 11, 0.1); border-radius: 8px; border-left: 4px solid var(--warning);">
                            <h4 style="color: var(--warning); margin-bottom: 0.5rem;">Medium Priority: ${cat.category}</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Your score is ${cat.percentage}% (${cat.total} questions). ${tips}</p>
                        </div>
                    `;
                });
                
                // Strengths
                if (strengths.length > 0) {
                    const strengthsList = strengths.map(cat => `${cat.category} (${cat.percentage}%)`).join(', ');
                    focusAreasHTML += `
                        <div style="padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border-left: 4px solid var(--success);">
                            <h4 style="color: var(--success); margin-bottom: 0.5rem;">Your Strengths</h4>
                            <p style="color: var(--text-muted); font-size: 0.9rem;">Great work in: ${strengthsList}. Maintain with light review.</p>
                        </div>
                    `;
                }
            }
            
            focusAreasContainer.innerHTML = focusAreasHTML;
        }
        
        function getCategoryTips(category) {
            const tips = {
                'Pharmacology': 'Focus on drug classifications, side effects, and nursing considerations.',
                'Mental Health': 'Review therapeutic communication and crisis intervention techniques.',
                'Pediatrics': 'Study growth & development milestones and pediatric-specific care.',
                'Medical-Surgical': 'Practice prioritization and delegation scenarios.',
                'Maternity': 'Review labor stages and postpartum complications.',
                'Community Health': 'Focus on health promotion and disease prevention strategies.'
            };
            return tips[category] || 'Continue practicing questions in this area.';
        }
        
        function showUpgradePrompt() {
            const upgradeModal = document.createElement('div');
            upgradeModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                padding: 2rem;
            `;
            
            upgradeModal.innerHTML = `
                <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 500px; text-align: center; position: relative;">
                    <button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-muted);">×</button>
                    <div style="font-size: 3rem; margin-bottom: 1rem;">🚀</div>
                    <h3 style="margin-bottom: 1rem; color: var(--text);">You've reached your question limit!</h3>
                    <p style="color: var(--text-muted); margin-bottom: 2rem;">You've completed all ${userSubscription.questionsRemaining} free questions. Upgrade to Premium for unlimited practice!</p>
                    <div style="display: flex; gap: 1rem; justify-content: center;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" class="btn btn-secondary">Maybe Later</button>
                        <button data-upgrade="premium" class="btn" style="background: var(--accent); color: white;">Upgrade Now</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(upgradeModal);
        }
        
        // Check for successful payment on page load
        function checkPaymentStatus() {
            const urlParams = new URLSearchParams(window.location.search);
            
            if (urlParams.get('success') === 'true') {
                // Payment successful - activate premium
                activatePremiumAccount();
                
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
                
                // Show success message
                showPaymentSuccessModal();
            } else if (urlParams.get('canceled') === 'true') {
                // Payment canceled
                alert('💳 Payment Canceled\n\nNo worries! You can upgrade to Premium anytime to unlock unlimited questions.');
                
                // Clean up URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }
        
        function activatePremiumAccount() {
            userSubscription.isPremium = true;
            userSubscription.questionsRemaining = Infinity;
            userSubscription.trialDaysLeft = 7; // Start with 7-day trial
            
            // Save to localStorage for persistence
            localStorage.setItem('userSubscription', JSON.stringify(userSubscription));
            
            // Update UI
            updatePremiumStatus();
        }
        
        function showPaymentSuccessModal() {
            const successModal = document.createElement('div');
            successModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                padding: 2rem;
            `;
            
            successModal.innerHTML = `
                <div style="background: white; border-radius: 16px; padding: 2rem; max-width: 500px; text-align: center; position: relative;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">🎉</div>
                    <h2 style="margin-bottom: 1rem; color: var(--success);">Welcome to Premium!</h2>
                    <p style="color: var(--text-muted); margin-bottom: 2rem;">Your 7-day free trial has started. You now have access to:</p>
                    <div style="text-align: left; margin-bottom: 2rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span style="color: var(--success);">✓</span>
                            <span>Unlimited practice questions</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span style="color: var(--success);">✓</span>
                            <span>Detailed explanations for every answer</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span style="color: var(--success);">✓</span>
                            <span>Advanced performance analytics</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <span style="color: var(--success);">✓</span>
                            <span>Personalized study plans</span>
                        </div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove(); showTab('practice');" class="btn" style="background: var(--success); color: white; width: 100%;">Start Practicing Now!</button>
                </div>
            `;
            
            document.body.appendChild(successModal);
        }
        
        function updatePremiumStatus() {
            // Update the upgrade tab button
            const upgradeTab = document.querySelector('[onclick="showTab(\'upgrade\')"]');
            if (userSubscription.isPremium) {
                upgradeTab.innerHTML = '👑 Premium';
                upgradeTab.style.background = 'linear-gradient(135deg, #10b981, #059669)';
            }
            
            // Update question counter in practice tab
            updateQuestionCounter();
        }
        
        function updateQuestionCounter() {
            const questionNumber = document.getElementById('questionNumber');
            if (userSubscription.isPremium) {
                questionNumber.textContent = `Question ${currentQuestion} • Premium: Unlimited`;
            } else {
                const remaining = Math.max(0, userSubscription.questionsRemaining - userProgress.totalAnswered);
                questionNumber.textContent = `Question ${currentQuestion} • ${remaining} questions left`;
            }
        }
        
        function generateMoreQuestions() {
            // In a real app, this would fetch more questions from a database
            // For demo purposes, we'll cycle through existing questions with variations
            const baseQuestion = questions[Math.floor(Math.random() * questions.length)];
            
            // Add a variation marker to show it's a new question
            const newQuestion = {
                ...baseQuestion,
                question: `[Premium Question] ${baseQuestion.question}`,
            };
            
            questions.push(newQuestion);
            totalQuestions = questions.length;
        }

        // Add some interactive feedback
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the app
            initializeApp();
            
            // Add hover effects to cards
            document.querySelectorAll('.progress-card, .study-item').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 8px 25px rgba(0, 0, 0, 0.15)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = 'var(--shadow)';
                });
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9779a06bd421f8cf',t:'MTc1NjYxMjg4Ni4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
